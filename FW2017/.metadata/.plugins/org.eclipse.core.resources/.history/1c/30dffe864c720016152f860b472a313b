//*****************************************************************************
//
// MSP432 main.c template - Empty main
//
//****************************************************************************

#include "msp.h"

#include "timer.hpp"

using namespace Peripherials;

void main(void) {

	WDTCTL = WDTPW | WDTHOLD;           // Stop watchdog timer

	P2->DIR = 1 << 4;
	P2->SEL0 = 1 << 4;

	TA0.SetPeriod((float) 20.0 / 10000);
	float ledTime;
	TA0.StartPWM(CC1, (float) 0);
	while (true) {
		for (ledTime = 0; ledTime < 20; ledTime += .1) {
			TA0.SetPWM(CC1, ledTime / 10000);
			__delay_cycles(480000);
		}
		for (ledTime = 20; ledTime > 0; ledTime -= .1) {
			TA0.SetPWM(CC1, ledTime / 10000);
			__delay_cycles(480000);
		}
	}
}
