/*
 * RollingBuffer.cpp
 *
 *  Created on: Sep 24, 2016
 *      Author: James
 */

#include "RollingBuffer.hpp"

namespace Buffers {

RollingBuffer::RollingBuffer(BaseBuffer base) :
		_start(base.GetData()), _end(base.GetData() + base.GetSize() - 1), _read(
				_start), _write(_start) {

}

void RollingBuffer::Enqueue(unsigned char c) {
	*_write = c;

	if (_write == _end) {
		_write = _start;
	} else {
		_write++;
	}
}

unsigned char RollingBuffer::Dequeue() {
	unsigned char c = *_read;

	if (_read == _end) {
		_read = _start;
	} else {
		_read++;
	}

	return c;
}

BaseBuffer::BaseBuffer(unsigned char *array, const int size) :
		_length(size) {
	_data = array;
}

unsigned char* BaseBuffer::GetData() {
	return _data;
}

int BaseBuffer::GetSize() {
	return _length;
}

} /* namespace Buffers */
